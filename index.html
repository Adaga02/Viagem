<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Hospedagens - Viagem Jap√£o &amp; Dubai</title>
    <style>
        :root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08); /* Light blue */
  --color-bg-2: rgba(245, 158, 11, 0.08); /* Light yellow */
  --color-bg-3: rgba(34, 197, 94, 0.08); /* Light green */
  --color-bg-4: rgba(239, 68, 68, 0.08); /* Light red */
  --color-bg-5: rgba(147, 51, 234, 0.08); /* Light purple */
  --color-bg-6: rgba(249, 115, 22, 0.08); /* Light orange */
  --color-bg-7: rgba(236, 72, 153, 0.08); /* Light pink */
  --color-bg-8: rgba(6, 182, 212, 0.08); /* Light cyan */

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
    0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    /* RGB versions for opacity control (Dark Mode) */
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    /* Background color tokens (Dark Mode) */
    --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
    --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
    --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
    --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
    --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
    --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
    --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
    --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

    /* Semantic Color Tokens (Dark Mode) */
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

    /* Common style patterns - updated for dark mode */
    --focus-ring: 0 0 0 3px var(--color-focus-ring);
    --focus-outline: 2px solid var(--color-primary);
    --status-bg-opacity: 0.15;
    --status-border-opacity: 0.25;
    --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

    /* RGB versions for dark mode */
    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);
  }
}

/* Base styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

h1 {
  font-size: var(--font-size-4xl);
}
h2 {
  font-size: var(--font-size-3xl);
}
h3 {
  font-size: var(--font-size-2xl);
}
h4 {
  font-size: var(--font-size-xl);
}
h5 {
  font-size: var(--font-size-lg);
}
h6 {
  font-size: var(--font-size-md);
}

p {
  margin: 0 0 var(--space-16) 0;
}

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-standard);
}

a:hover {
  color: var(--color-primary-hover);
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-16);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border: none;
  text-decoration: none;
  position: relative;
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn--primary {
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
}

.btn--primary:hover {
  background: var(--color-primary-hover);
}

.btn--primary:active {
  background: var(--color-primary-active);
}

.btn--secondary {
  background: var(--color-secondary);
  color: var(--color-text);
}

.btn--secondary:hover {
  background: var(--color-secondary-hover);
}

.btn--secondary:active {
  background: var(--color-secondary-active);
}

.btn--outline {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text);
}

.btn--outline:hover {
  background: var(--color-secondary);
}

.btn--sm {
  padding: var(--space-4) var(--space-12);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
}

.btn--lg {
  padding: var(--space-10) var(--space-20);
  font-size: var(--font-size-lg);
  border-radius: var(--radius-md);
}

.btn--full-width {
  width: 100%;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Form elements */
.form-control {
  display: block;
  width: 100%;
  padding: var(--space-8) var(--space-12);
  font-size: var(--font-size-md);
  line-height: 1.5;
  color: var(--color-text);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
}

select.form-control {
  padding: var(--space-8) var(--space-12);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: var(--select-caret-light);
  background-repeat: no-repeat;
  background-position: right var(--space-12) center;
  background-size: 16px;
  padding-right: var(--space-32);
}

.form-control:focus {
  border-color: var(--color-primary);
  outline: var(--focus-outline);
}

.form-label {
  display: block;
  margin-bottom: var(--space-8);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.form-group {
  margin-bottom: var(--space-16);
}

/* Card component */
.card {
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition: box-shadow var(--duration-normal) var(--ease-standard);
}

.card:hover {
  box-shadow: var(--shadow-md);
}

.card__body {
  padding: var(--space-16);
}

/* Status indicators */
.status {
  display: inline-flex;
  align-items: center;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.status--success {
  background-color: rgba(
    var(--color-success-rgb, 33, 128, 141),
    var(--status-bg-opacity)
  );
  color: var(--color-success);
  border: 1px solid
    rgba(var(--color-success-rgb, 33, 128, 141), var(--status-border-opacity));
}

.status--warning {
  background-color: rgba(
    var(--color-warning-rgb, 168, 75, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-warning);
  border: 1px solid
    rgba(var(--color-warning-rgb, 168, 75, 47), var(--status-border-opacity));
}

.status--info {
  background-color: rgba(
    var(--color-info-rgb, 98, 108, 113),
    var(--status-bg-opacity)
  );
  color: var(--color-info);
  border: 1px solid
    rgba(var(--color-info-rgb, 98, 108, 113), var(--status-border-opacity));
}

/* Container layout */
.container {
  width: 100%;
  margin-right: auto;
  margin-left: auto;
  padding-right: var(--space-16);
  padding-left: var(--space-16);
}

@media (min-width: 640px) {
  .container {
    max-width: var(--container-sm);
  }
}
@media (min-width: 768px) {
  .container {
    max-width: var(--container-md);
  }
}
@media (min-width: 1024px) {
  .container {
    max-width: var(--container-lg);
  }
}
@media (min-width: 1280px) {
  .container {
    max-width: var(--container-xl);
  }
}

/* Utility classes */
.flex {
  display: flex;
}
.flex-col {
  flex-direction: column;
}
.items-center {
  align-items: center;
}
.justify-center {
  justify-content: center;
}
.justify-between {
  justify-content: space-between;
}
.gap-4 {
  gap: var(--space-4);
}
.gap-8 {
  gap: var(--space-8);
}
.gap-16 {
  gap: var(--space-16);
}

.hidden {
  display: none;
}

        /* Custom styles */
        .header {
            background: var(--color-surface);
            border-bottom: 1px solid var(--color-card-border);
            padding: var(--space-16) 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .city-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: var(--space-20);
            margin-top: var(--space-24);
        }

        .city-card {
            position: relative;
        }

        .city-card--future {
            opacity: 0.7;
        }

        .city-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-16);
        }

        .city-title {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
        }

        .city-dates {
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
        }

        .hotels-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-16);
        }

        .hotel-card {
            background: var(--color-bg-1);
            border-radius: var(--radius-base);
            padding: var(--space-16);
            border: 1px solid var(--color-card-border-inner);
        }

        .hotel-name {
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--space-8);
        }

        .rooms-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-8);
        }

        .room-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-8);
            background: rgba(var(--color-brown-600-rgb), 0.05);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-sm);
        }

        .room-type {
            font-weight: var(--font-weight-medium);
            text-transform: capitalize;
        }

        .room-occupants {
            color: var(--color-text-secondary);
            font-size: var(--font-size-xs);
        }

        .filters-bar {
            background: var(--color-bg-2);
            padding: var(--space-16);
            border-radius: var(--radius-base);
            margin-bottom: var(--space-20);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: var(--space-24);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-20);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: var(--font-size-xl);
            cursor: pointer;
            color: var(--color-text-secondary);
        }

        .person-summary {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: var(--space-16);
            margin-top: var(--space-20);
        }

        .person-stay {
            background: var(--color-bg-3);
            padding: var(--space-12);
            border-radius: var(--radius-base);
            border: 1px solid var(--color-card-border);
        }

        .export-section {
            margin-top: var(--space-24);
            padding: var(--space-20);
            background: var(--color-bg-4);
            border-radius: var(--radius-lg);
            text-align: center;
        }

        .no-data-message {
            text-align: center;
            color: var(--color-text-secondary);
            font-style: italic;
            padding: var(--space-20);
        }

        @media (max-width: 768px) {
            .city-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                padding: var(--space-16);
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="flex justify-between items-center">
                <div>
                    <h1>üè® Gerenciador de Hospedagens</h1>
                    <p style="margin: 0; color: var(--color-text-secondary); font-size: var(--font-size-sm);">Viagem Jap√£o &amp; Dubai ‚Ä¢ Fevereiro - Mar√ßo 2025</p>
                </div>
                <div class="flex gap-8">
                    <button class="btn btn--secondary btn--sm" onclick="showAddModal()">+ Nova Hospedagem</button>
                    <button class="btn btn--outline btn--sm" onclick="showExportModal()">üì§ Exportar</button>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="filters-bar">
            <div class="flex gap-16 items-center">
                <div class="form-group" style="margin-bottom: 0; min-width: 200px;">
                    <label class="form-label" for="personFilter">Filtrar por pessoa:</label>
                    <select id="personFilter" class="form-control" onchange="filterByPerson()">
                        <option value="">Todas as pessoas</option>
                    </select>
                </div>
                <div class="flex gap-8">
                    <button class="btn btn--sm btn--outline" onclick="showAllCities()">Todas as cidades</button>
                    <button class="btn btn--sm btn--secondary" onclick="showConfirmedOnly()">Apenas confirmadas</button>
                </div>
            </div>
        </div>

        <div id="citiesContainer" class="city-grid">
            <!-- Cities will be rendered here -->
        </div>

        <div class="export-section">
            <h3>üìä Resumo da Viagem</h3>
            <p id="tripSummary" style="margin-bottom: var(--space-16);"></p>
            <button class="btn btn--primary" onclick="generateShareableLink()">üîó Gerar Link Compartilh√°vel</button>
        </div>
    </main>

    <!-- Add/Edit Modal -->
    <div id="addModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Nova Hospedagem</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <form id="accommodationForm">
                <div class="form-group">
                    <label class="form-label" for="cityName">Cidade:</label>
                    <input type="text" id="cityName" class="form-control" required>
                </div>
                <div class="flex gap-16">
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label" for="startDate">Data de in√≠cio:</label>
                        <input type="date" id="startDate" class="form-control" required>
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label" for="endDate">Data de fim:</label>
                        <input type="date" id="endDate" class="form-control" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="hotelName">Nome do Hotel:</label>
                    <input type="text" id="hotelName" class="form-control" required>
                </div>
                <div class="flex gap-16">
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label" for="roomType">Tipo de Quarto:</label>
                        <select id="roomType" class="form-control" required>
                            <option value="">Selecione...</option>
                            <option value="individual">Individual</option>
                            <option value="duplo">Duplo</option>
                            <option value="triplo">Triplo</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label" for="roomStatus">Status:</label>
                        <select id="roomStatus" class="form-control" required>
                            <option value="confirmado">Confirmado</option>
                            <option value="pendente">Pendente</option>
                            <option value="sem dados">Sem dados</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="occupants">Ocupantes (separados por v√≠rgula):</label>
                    <input type="text" id="occupants" class="form-control" placeholder="Ex: Jo√£o, Maria, Pedro">
                </div>
                <div class="flex gap-8 justify-between">
                    <button type="button" class="btn btn--secondary" onclick="closeModal()">Cancelar</button>
                    <button type="submit" class="btn btn--primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Person Filter Modal -->
    <div id="personModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="personModalTitle">Hospedagens de</h3>
                <button class="close-btn" onclick="closePersonModal()">&times;</button>
            </div>
            <div id="personStays" class="person-summary">
                <!-- Person stays will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Exportar Dados</h3>
                <button class="close-btn" onclick="closeExportModal()">&times;</button>
            </div>
            <div class="flex flex-col gap-16">
                <button class="btn btn--primary btn--full-width" onclick="exportToJSON()">üìã Copiar como JSON</button>
                <button class="btn btn--secondary btn--full-width" onclick="exportToText()">üìù Copiar como Texto</button>
                <button class="btn btn--outline btn--full-width" onclick="printSummary()">üñ®Ô∏è Imprimir Resumo</button>
            </div>
        </div>
    </div>

    <script>
        // Global data store
        let accommodations = {
            cities: [],
            people: [
                "Lud", "Laura", "Fabiano", "Tia Cec√≠lia", "Eunice", "Lucas",
                "Jacinto", "Eliana", "Rafael", "Mariana", "Marcus", "Luciana"
            ]
        };

        let currentFilter = '';
        let editingIndex = -1;

        // Initialize with pre-loaded data
        function initializeData() {
            accommodations.cities = [
                {
                    name: "T√≥quio",
                    startDate: "2025-02-23",
                    endDate: "2025-03-02",
                    status: "confirmado",
                    hotels: [
                        {
                            name: "Hotel Toyoko Inn Yashio Ekimae",
                            period: "23/02 a 26/02",
                            rooms: [
                                { type: "triplo", occupants: ["Lud", "Laura", "Fabiano"], dates: "23/02 a 26/02" },
                                { type: "individual", occupants: ["Tia Cec√≠lia"], dates: "23/02 a 26/02" },
                                { type: "individual", occupants: ["Eunice"], dates: "23/02 a 26/02" },
                                { type: "individual", occupants: ["Lucas"], dates: "23/02 a 26/02" },
                                { type: "duplo", occupants: ["Jacinto", "Eliana"], dates: "23/02 a 26/02" },
                                { type: "duplo", occupants: ["Rafael", "Mariana"], dates: "23/02 a 26/02" },
                                { type: "duplo", occupants: ["Marcus", "Luciana"], dates: "23/02 a 26/02" }
                            ]
                        },
                        {
                            name: "Hotel Okubo House",
                            period: "26/02 a 02/03",
                            rooms: [
                                { type: "triplo", occupants: ["Lud", "Laura", "Fabiano"], dates: "26/02 a 02/03" }
                            ]
                        }
                    ]
                },
                {
                    name: "Hakone",
                    startDate: "2025-03-02",
                    endDate: "2025-03-03",
                    status: "confirmado",
                    hotels: [
                        {
                            name: "Hotel Green Plaza Hakone",
                            period: "02/03 a 03/03",
                            rooms: [
                                { type: "triplo", occupants: ["Marcus", "Luciana", "Lucas"], dates: "02/03 a 03/03" },
                                { type: "triplo", occupants: ["Fabiano", "Lud", "Laura"], dates: "02/03 a 03/03" },
                                { type: "duplo", occupants: ["Jacinto", "Eliana"], dates: "02/03 a 03/03" },
                                { type: "duplo", occupants: ["Cec√≠lia", "Eunice"], dates: "02/03 a 03/03" },
                                { type: "duplo", occupants: ["Rafael", "Mariana"], dates: "02/03 a 03/03" }
                            ]
                        }
                    ]
                },
                {
                    name: "Osaka",
                    startDate: "2025-03-03",
                    endDate: "2025-03-08",
                    status: "confirmado",
                    hotels: [
                        {
                            name: "Hotel Plaza Osaka",
                            period: "03/03 a 08/03",
                            rooms: [
                                { type: "individual", occupants: ["Lucas"], dates: "03/03 a 08/03" },
                                { type: "duplo", occupants: ["Jacinto", "Eliana"], dates: "03/03 a 08/03" },
                                { type: "duplo", occupants: ["Cec√≠lia", "Eunice"], dates: "03/03 a 08/03" },
                                { type: "duplo", occupants: ["Rafael", "Mariana"], dates: "03/03 a 08/03" },
                                { type: "duplo", occupants: ["Marcus", "Luciana"], dates: "03/03 a 08/03" }
                            ]
                        }
                    ]
                },
                {
                    name: "Kumamoto",
                    startDate: "2025-03-08",
                    endDate: "2025-03-09",
                    status: "sem dados",
                    hotels: []
                },
                {
                    name: "Quioto",
                    startDate: "2025-03-09",
                    endDate: "2025-03-11",
                    status: "sem dados",
                    hotels: []
                },
                {
                    name: "T√≥quio",
                    startDate: "2025-03-11",
                    endDate: "2025-03-14",
                    status: "sem dados",
                    hotels: []
                },
                {
                    name: "Dubai",
                    startDate: "2025-03-14",
                    endDate: "2025-03-18",
                    status: "sem dados",
                    hotels: []
                }
            ];

            // Sort cities by start date
            accommodations.cities.sort((a, b) => new Date(a.startDate) - new Date(b.startDate));
        }

        // Format date for display
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });
        }

        // Get status class
        function getStatusClass(status) {
            switch (status) {
                case 'confirmado': return 'status--success';
                case 'pendente': return 'status--warning';
                default: return 'status--info';
            }
        }

        // Get status text
        function getStatusText(status) {
            switch (status) {
                case 'confirmado': return 'Confirmado';
                case 'pendente': return 'Pendente';
                case 'sem dados': return 'Sem dados';
                default: return status;
            }
        }

        // Render cities
        function renderCities(citiesToRender = null) {
            const container = document.getElementById('citiesContainer');
            const cities = citiesToRender || accommodations.cities;
            
            if (cities.length === 0) {
                container.innerHTML = '<div class="no-data-message">Nenhuma cidade encontrada.</div>';
                return;
            }

            container.innerHTML = cities.map(city => {
                const isFuture = city.status === 'sem dados';
                const hotelsHtml = city.hotels.length > 0 ? 
                    city.hotels.map(hotel => `
                        <div class="hotel-card">
                            <div class="hotel-name">${hotel.name}</div>
                            <div class="city-dates">${hotel.period}</div>
                            <div class="rooms-list">
                                ${hotel.rooms.map(room => `
                                    <div class="room-item">
                                        <div>
                                            <div class="room-type">${room.type}</div>
                                            <div class="room-occupants">${room.occupants.join(', ')}</div>
                                        </div>
                                        <div class="city-dates">${room.dates}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `).join('') : 
                    '<div class="no-data-message">Nenhum hotel cadastrado ainda</div>';

                return `
                    <div class="city-card card ${isFuture ? 'city-card--future' : ''}">
                        <div class="card__body">
                            <div class="city-header">
                                <div>
                                    <div class="city-title">${city.name}</div>
                                    <div class="city-dates">${formatDate(city.startDate)} a ${formatDate(city.endDate)}</div>
                                </div>
                                <div class="status ${getStatusClass(city.status)}">
                                    ${getStatusText(city.status)}
                                </div>
                            </div>
                            <div class="hotels-list">
                                ${hotelsHtml}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Initialize person filter dropdown
        function initializePersonFilter() {
            const select = document.getElementById('personFilter');
            select.innerHTML = '<option value="">Todas as pessoas</option>' + 
                accommodations.people.map(person => 
                    `<option value="${person}">${person}</option>`
                ).join('');
        }

        // Filter by person
        function filterByPerson() {
            const selectedPerson = document.getElementById('personFilter').value;
            currentFilter = selectedPerson;
            
            if (!selectedPerson) {
                renderCities();
                return;
            }

            // Show modal with person's accommodations
            showPersonModal(selectedPerson);
        }

        // Show person modal
        function showPersonModal(personName) {
            const modal = document.getElementById('personModal');
            const title = document.getElementById('personModalTitle');
            const container = document.getElementById('personStays');
            
            title.textContent = `Hospedagens de ${personName}`;
            
            // Find all stays for this person
            const personStays = [];
            accommodations.cities.forEach(city => {
                city.hotels.forEach(hotel => {
                    hotel.rooms.forEach(room => {
                        if (room.occupants.includes(personName)) {
                            personStays.push({
                                city: city.name,
                                hotel: hotel.name,
                                roomType: room.type,
                                dates: room.dates,
                                roommates: room.occupants.filter(p => p !== personName),
                                status: city.status
                            });
                        }
                    });
                });
            });
            
            if (personStays.length === 0) {
                container.innerHTML = '<div class="no-data-message">Esta pessoa n√£o est√° cadastrada em nenhuma hospedagem.</div>';
            } else {
                container.innerHTML = personStays.map(stay => `
                    <div class="person-stay">
                        <h4>${stay.city}</h4>
                        <p><strong>${stay.hotel}</strong></p>
                        <p>Quarto ${stay.roomType} ‚Ä¢ ${stay.dates}</p>
                        ${stay.roommates.length > 0 ? 
                            `<p><small>Acompanhantes: ${stay.roommates.join(', ')}</small></p>` : 
                            '<p><small>Quarto individual</small></p>'
                        }
                        <div class="status ${getStatusClass(stay.status)}">
                            ${getStatusText(stay.status)}
                        </div>
                    </div>
                `).join('');
            }
            
            modal.classList.add('active');
        }

        // Show all cities
        function showAllCities() {
            currentFilter = '';
            document.getElementById('personFilter').value = '';
            renderCities();
        }

        // Show confirmed only
        function showConfirmedOnly() {
            const confirmedCities = accommodations.cities.filter(city => city.status === 'confirmado');
            renderCities(confirmedCities);
        }

        // Show add modal
        function showAddModal() {
            editingIndex = -1;
            document.getElementById('modalTitle').textContent = 'Nova Hospedagem';
            document.getElementById('accommodationForm').reset();
            document.getElementById('addModal').classList.add('active');
        }

        // Close modals
        function closeModal() {
            document.getElementById('addModal').classList.remove('active');
        }

        function closePersonModal() {
            document.getElementById('personModal').classList.remove('active');
        }

        function closeExportModal() {
            document.getElementById('exportModal').classList.remove('active');
        }

        // Handle form submission
        document.getElementById('accommodationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                cityName: document.getElementById('cityName').value,
                startDate: document.getElementById('startDate').value,
                endDate: document.getElementById('endDate').value,
                hotelName: document.getElementById('hotelName').value,
                roomType: document.getElementById('roomType').value,
                roomStatus: document.getElementById('roomStatus').value,
                occupants: document.getElementById('occupants').value.split(',').map(s => s.trim()).filter(s => s)
            };
            
            // Find or create city
            let city = accommodations.cities.find(c => 
                c.name === formData.cityName && 
                c.startDate === formData.startDate
            );
            
            if (!city) {
                city = {
                    name: formData.cityName,
                    startDate: formData.startDate,
                    endDate: formData.endDate,
                    status: formData.roomStatus,
                    hotels: []
                };
                accommodations.cities.push(city);
                accommodations.cities.sort((a, b) => new Date(a.startDate) - new Date(b.startDate));
            }
            
            // Find or create hotel
            let hotel = city.hotels.find(h => h.name === formData.hotelName);
            if (!hotel) {
                hotel = {
                    name: formData.hotelName,
                    period: `${formatDate(formData.startDate)} a ${formatDate(formData.endDate)}`,
                    rooms: []
                };
                city.hotels.push(hotel);
            }
            
            // Add room
            hotel.rooms.push({
                type: formData.roomType,
                occupants: formData.occupants,
                dates: `${formatDate(formData.startDate)} a ${formatDate(formData.endDate)}`
            });
            
            // Update people list
            formData.occupants.forEach(person => {
                if (!accommodations.people.includes(person)) {
                    accommodations.people.push(person);
                }
            });
            
            closeModal();
            renderCities();
            initializePersonFilter();
            updateTripSummary();
        });

        // Update trip summary
        function updateTripSummary() {
            const totalCities = accommodations.cities.length;
            const confirmedCities = accommodations.cities.filter(c => c.status === 'confirmado').length;
            const totalPeople = accommodations.people.length;
            
            let totalRooms = 0;
            accommodations.cities.forEach(city => {
                city.hotels.forEach(hotel => {
                    totalRooms += hotel.rooms.length;
                });
            });
            
            document.getElementById('tripSummary').textContent = 
                `${totalCities} cidades ‚Ä¢ ${confirmedCities} confirmadas ‚Ä¢ ${totalRooms} quartos ‚Ä¢ ${totalPeople} pessoas`;
        }

        // Export functions
        function showExportModal() {
            document.getElementById('exportModal').classList.add('active');
        }

        function exportToJSON() {
            const dataStr = JSON.stringify(accommodations, null, 2);
            navigator.clipboard.writeText(dataStr).then(() => {
                alert('Dados copiados como JSON para a √°rea de transfer√™ncia!');
                closeExportModal();
            });
        }

        function exportToText() {
            let textOutput = 'HOSPEDAGENS DA VIAGEM\n\n';
            
            accommodations.cities.forEach(city => {
                textOutput += `${city.name.toUpperCase()} (${formatDate(city.startDate)} a ${formatDate(city.endDate)}) - ${getStatusText(city.status)}\n`;
                
                if (city.hotels.length === 0) {
                    textOutput += '  Sem hot√©is cadastrados\n\n';
                    return;
                }
                
                city.hotels.forEach(hotel => {
                    textOutput += `  ${hotel.name} (${hotel.period})\n`;
                    hotel.rooms.forEach(room => {
                        textOutput += `    - Quarto ${room.type}: ${room.occupants.join(', ')} (${room.dates})\n`;
                    });
                });
                textOutput += '\n';
            });
            
            navigator.clipboard.writeText(textOutput).then(() => {
                alert('Dados copiados como texto para a √°rea de transfer√™ncia!');
                closeExportModal();
            });
        }

        function printSummary() {
            const printContent = document.getElementById('citiesContainer').innerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Hospedagens da Viagem</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            .city-card { border: 1px solid #ddd; margin-bottom: 20px; padding: 15px; border-radius: 8px; }
                            .city-title { font-size: 24px; font-weight: bold; }
                            .hotel-card { background: #f5f5f5; margin: 10px 0; padding: 10px; border-radius: 5px; }
                            .room-item { margin: 5px 0; padding: 5px; background: #fff; border-radius: 3px; }
                        </style>
                    </head>
                    <body>
                        <h1>Hospedagens da Viagem - Jap√£o & Dubai</h1>
                        ${printContent}
                    </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
            closeExportModal();
        }

        function generateShareableLink() {
            const currentUrl = window.location.href;
            const shareableData = btoa(JSON.stringify(accommodations));
            const shareableUrl = `${currentUrl}?data=${shareableData}`;
            
            navigator.clipboard.writeText(shareableUrl).then(() => {
                alert('Link compartilh√°vel copiado para a √°rea de transfer√™ncia!\n\nObs: Este link cont√©m todos os dados da viagem e pode ser enviado para outras pessoas visualizarem.');
            });
        }

        // Initialize the application
        function init() {
            initializeData();
            renderCities();
            initializePersonFilter();
            updateTripSummary();
            
            // Check for shared data in URL
            const urlParams = new URLSearchParams(window.location.search);
            const sharedData = urlParams.get('data');
            if (sharedData) {
                try {
                    accommodations = JSON.parse(atob(sharedData));
                    renderCities();
                    initializePersonFilter();
                    updateTripSummary();
                } catch (e) {
                    console.error('Erro ao carregar dados compartilhados:', e);
                }
            }
        }

        // Start the application
        init();
    </script>
</body>
</html>